<div>
    <oui-header
        data-heading="{{ 'iam_policy_identities_title' | translate : { policy: $ctrl.policy.name } }}"
        data-description="{{ 'iam_policy_identities_description' | translate }}"
    >
        <!-- <Guide> -->
        <oui-guide-menu
            data-text="{{:: 'iam_policy_identities_guide_text' | translate }}"
        >
            <oui-guide-menu-item
                data-ng-repeat="guide in $ctrl.guides track by $index"
                data-href="{{:: guide.link }}"
                data-external
            >
                <span data-ng-bind=":: guide.title"></span>
            </oui-guide-menu-item>
        </oui-guide-menu>
        <!-- </Guide> -->
    </oui-header>

    <div data-ng-if="$ctrl.loading">
        <oui-spinner size="m"></oui-spinner>
    </div>

    <form
        novalidate
        name="identitiesForm"
        data-ng-if="!$ctrl.loading"
        data-ng-submit="$ctrl.editIdentities()"
    >
        <oui-field
            label="{{ 'iam_policy_identities_field_users_selection_label' | translate }}"
            size="xl"
        >
            <div class="oui-input-group oui-input-group_xl">
                <input
                    placeholder="{{ 'iam_policy_identities_field_users_selection_placeholder' | translate }}"
                    class="oui-input oui-input_inline mr-2"
                    name="identity"
                    type="text"
                    data-ng-model="$ctrl.model"
                    data-oui-autocomplete="$ctrl.suggestions"
                    data-oui-autocomplete-property="userName"
                    data-oui-autocomplete-on-select="$ctrl.suggestion = value"
                    data-ng-keypress="$ctrl.onIdentityKeypress($event)"
                />
                <button
                    class="oui-button oui-button_secondary oui-button_icon-right"
                    type="submit"
                    data-ng-disabled="!$ctrl.model"
                >
                    <span
                        data-translate="iam_policy_identities_field_users_button_add"
                    ></span>
                    <span
                        class="oui-icon oui-icon-plus"
                        aria-hidden="true"
                    ></span>
                </button>
            </div>
            <div class="oui-chip__container">
                <button
                    data-ng-repeat="chip in $ctrl.chips track by $index"
                    class="oui-chip oui-chip_closable"
                    type="button"
                    data-ng-click="$ctrl.deleteIdentity(chip.urn)"
                >
                    <span data-ng-bind="chip.title"></span>
                    <span
                        class="oui-chip__close oui-icon oui-icon-close"
                    ></span>
                </button>
            </div>
        </oui-field>

        <!-- <Footer> -->
        <div class="d-flex align-items-center">
            <button
                type="button"
                class="oui-button oui-button_l oui-button_link mr-3"
                data-ng-click="$ctrl.goBack()"
            >
                <span data-translate="iam_policy_identities_form_cancel"></span>
            </button>
            <button
                type="button"
                class="oui-button oui-button_l oui-button_primary mr-3"
                data-ng-click="$ctrl.submit()"
            >
                <span data-translate="iam_policy_identities_form_submit"></span>
            </button>
        </div>
        <!-- </Footer> -->
    </form>

    <div data-ui-view></div>
</div>
